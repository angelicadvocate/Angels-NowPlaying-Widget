<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Angels Now-Playing Widget F8 Editor (Vinyl/Cassette) v0.4.2 -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>F8 Retro Vinyl/Cassette Editor</title>
  <link rel="stylesheet" href="F8-Editor.css" />
</head>
<body>
  <div id="site">
    <div id="layout">
      <!-- Controls Section -->
      <div id="controls">
  <h2>F8: Retro Vinyl Editor</h2>
        
        <!-- Mode Toggle removed -->

        <!-- Basic Color Controls -->
        <div class="controls-section">
          <h3>Colors</h3>
          <label class="info">Text Color</label>
          <input type="color" id="textColor" value="#ffffff">
          
          <label class="info">Accent Color</label>
          <input type="color" id="accentColor" value="#ff2a2a">
        </div>

        <!-- Font Controls -->
        <div class="controls-section">
          <h3>Typography</h3>
          <label class="info">Artist Font Size</label>
          <input type="range" class="slider" id="artistSize" min="12" max="48" value="24">
          
          <label class="info">Song Font Size</label>
          <input type="range" class="slider" id="songSize" min="16" max="50" value="30">

          <label class="info">Text Vertical Offset</label>
          <input type="range" class="slider" id="contentOffset" min="-290" max="290" value="136">
        </div>

        <button id="save">Generate CSS</button>
        <button id="back_button" onclick="history.back()">Back to Editor Dashboard</button>
      </div>

      <!-- Preview Section -->
      <div id="sample">
        <div id="background">
          <!-- Preview Album Art Background (centered in container) -->
          <div id="album-art-container" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 0;">
            <img id="album-bg-img" src="../static_assets/SampleAlbum.png" alt="Sample Album" style="max-width: 160px; height: auto; object-fit: cover; border-radius: 50%; opacity: 1; animation: spin 3s linear infinite;">
          </div>
          <!-- Vinyl Elements (centered in container) -->
          <div id="vinyl-container" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1;">
            <img id="vinyl-record" src="../static_assets/vinyl_base.png" alt="Vinyl Record" style="max-width: 450px; height: auto; opacity: 1;">
          </div>

          <!-- Cassette Elements removed -->

          <!-- Common Content -->
          <div id="content">
            <div id="text-box">
              <p id="artist">Sample Artist</p>
              <p id="song">Sample Song Title</p>
            </div>
          </div>
          <!-- Progress bar removed -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // Color and style controls
    const textColorInput = document.getElementById('textColor');
    const accentColorInput = document.getElementById('accentColor');
    const artistSizeInput = document.getElementById('artistSize');
    const songSizeInput = document.getElementById('songSize');
    const contentOffsetInput = document.getElementById('contentOffset');

    let artistSizeValue = artistSizeInput.value;
    let songSizeValue = songSizeInput.value;
    let accentColorValue = accentColorInput.value;
    let textColorValue = textColorInput.value;
    let contentOffsetValue = contentOffsetInput.value;

    function applyPreview() {
      // Update CSS variables for live preview
      document.getElementById('artist').style.fontSize = artistSizeValue + 'px';
      document.getElementById('artist').style.color = accentColorValue;
      document.getElementById('song').style.fontSize = songSizeValue + 'px';
      document.getElementById('song').style.color = textColorValue;
      document.getElementById('content').style.transform = `translateY(${contentOffsetValue}px)`;
    }

    [
      textColorInput,
      accentColorInput,
      artistSizeInput,
      songSizeInput,
      contentOffsetInput
    ].forEach((slider) => {
      slider.addEventListener('input', (e) => {
        if (e.target === artistSizeInput) artistSizeValue = e.target.value;
        if (e.target === songSizeInput) songSizeValue = e.target.value;
        if (e.target === accentColorInput) accentColorValue = e.target.value;
        if (e.target === textColorInput) textColorValue = e.target.value;
        if (e.target === contentOffsetInput) contentOffsetValue = e.target.value;
        applyPreview();
      });
    });
    document.getElementById('save').addEventListener('click', function() {
      generateCSS();
    });
    window.addEventListener('DOMContentLoaded', function() {
      applyPreview();
    });

    function generateCSS() {
      const scale = 2;
      const textColor = textColorInput.value;
      const accentColor = accentColorInput.value;
      const artistSize = artistSizeInput.value;
      const songSize = songSizeInput.value;
      const contentOffset = contentOffsetInput.value;

      const css = `/* F8 Retro Vinyl Theme - Generated CSS */
:root {
  --text-color: ${textColor};
  --accent-color: ${accentColor};
  --font-main: "proxima-nova", sans-serif;
}

#background {
  background-color: transparent;
  position: relative;
  width: ${400 * scale}px;
  height: ${300 * scale}px;
  overflow: visible;
  font-family: var(--font-main);
}

#album-art-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 0;
}

#album-bg-img {
  max-width: ${160 * scale}px;
  height: auto;
  object-fit: cover;
  border-radius: 50%;
  opacity: 1;
  animation: spin 3s linear infinite;
}

#vinyl-container {
  opacity: 1;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1;
}

#vinyl-record {
  max-width: ${450 * scale}px;
  height: auto;
  animation: spin 3s linear infinite;
  opacity: 1;
}


#artist {
  font-size: ${artistSize * scale}px;
  color: var(--accent-color);
  font-weight: bold;
  text-transform: uppercase;
  margin: 0 0 ${10 * scale}px 0;
  text-shadow: 0 ${4 * scale}px ${16 * scale}px rgba(0,0,0,0.65), 0 ${2 * scale}px ${4 * scale}px rgba(0,0,0,0.45);
  font-family: var(--font-main);
}

#song {
  font-size: ${songSize * scale}px;
  color: var(--text-color);
  font-weight: bold;
  margin: 0;
  text-shadow: 0 ${4 * scale}px ${16 * scale}px rgba(0,0,0,0.65), 0 ${2 * scale}px ${4 * scale}px rgba(0,0,0,0.45);
  font-family: var(--font-main);
}

#content {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  z-index: 2;
  transform: translateY(${contentOffset * scale}px);
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
`;

      // Download the CSS
      const blob = new Blob([css], { type: 'text/css' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'F8-Retro-Vinyl-Styles.css';
      a.click();
      URL.revokeObjectURL(url);
    }

    // Initialize
    applyPreview();
  </script>
</body>
</html>